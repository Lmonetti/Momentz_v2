var express = require('express');
var router = express.Router();

var data = [{"updated": "2012-02-01T11:22:00-0500", "url": "http://www.washingtonpost.com/business/on-small-business/how-a-small-business-innovation-research-grant-can-help-you/2012/01/27/gIQAjQymhQ_story.html", "text": " How a Small Business Innovation Research Grant can help you", "topic": 3, "outlet": "Washington Post", "id": 151, "posted": "2012-02-01T11:22:00-0500"}, {"updated": "2012-05-06T05:12:01-04:00", "url": "http://www.huffingtonpost.com/2012/03/06/homefusion-verizon-wireless_n_1322907.html", "text": "HomeFusion: Verizon Launches Wireless Broadband For Rural And Remote Homes", "topic": 3, "outlet": "Huffington Post", "id": 1, "posted": "2012-03-06T00:03:10-05:00"}, {"updated": "2012-10-14T08:10:00-0500", "url": "http://www.washingtonpost.com/business/capitalbusiness/washington-area-federal-contract-awards-for-the-week-of-oct-15/2012/10/14/9e12e1e4-0e55-11e2-bd1a-b868e65d57eb_story.html", "text": " Washington area federal contract awards for the week of Oct. 15", "topic": 3, "outlet": "Washington Post", "id": 150, "posted": "2012-10-14T08:10:00-0500"}, {"updated": "2013-02-15T16:13:20-05:00", "url": "http://www.huffingtonpost.com/2013/02/15/att-internet-speeds-fcc_n_2696644.html", "text": "AT&T And Other Internet Providers Still Not Delivering Advertised Speeds: FCC", "topic": 3, "outlet": "Huffington Post", "id": 2, "posted": "2013-02-15T16:13:20-05:00"}, {"updated": "2013-12-12T15:11:00.000Z", "url": "http://www.nbcnews.com/business/travel/jetblue-launches-free-flight-wi-fi-f2D11732359", "text": "JetBlue launches free in-flight Wi-Fi", "topic": 3, "outlet": "NBC News", "id": 6, "posted": "2013-12-12T15:11:00.000Z"}, {"updated": "2014-10-17T07:50:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-oct-18-19/2014/10/17/c0186e50-a8ff-4bfb-bf55-409a40a281c9_story.html", "text": " Virginia open houses Oct. 18-19", "topic": 3, "outlet": "Washington Post", "id": 175, "posted": "2014-10-17T07:50:00-0500"}, {"updated": "2014-10-17T07:55:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-oct-18-19/2014/10/17/4bf05073-b62b-4770-89d7-42ab9b44e7ae_story.html", "text": " Maryland open houses Oct. 18-19", "topic": 3, "outlet": "Washington Post", "id": 166, "posted": "2014-10-17T07:55:00-0500"}, {"updated": "2014-11-14T07:55:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-nov-15-16/2014/11/14/e4b739a4-52f3-4784-afa8-303fb8574081_story.html", "text": " Virginia open houses Nov. 15-16", "topic": 3, "outlet": "Washington Post", "id": 174, "posted": "2014-11-14T07:55:00-0500"}, {"updated": "2015-04-10T07:55:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-april-11-12/2015/04/10/59288e02-fd26-41d9-9bd3-0f34cc8946d0_story.html", "text": " Virginia open houses April 11-12", "topic": 3, "outlet": "Washington Post", "id": 173, "posted": "2015-04-10T07:55:00-0500"}, {"updated": "2015-04-10T08:00:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-april-11-12/2015/04/10/1a0cd0e2-2022-43d8-9879-e946db6c88d6_story.html", "text": " Maryland open houses April 11-12", "topic": 3, "outlet": "Washington Post", "id": 172, "posted": "2015-04-10T08:00:00-0500"}, {"updated": "2015-04-17T08:00:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-april-18-19/2015/04/17/279db555-dac2-4942-b15e-78dc65a14d72_story.html", "text": " Virginia open houses April 18-19", "topic": 3, "outlet": "Washington Post", "id": 165, "posted": "2015-04-17T08:00:00-0500"}, {"updated": "2015-04-24T07:50:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-april-25-26/2015/04/24/73076f1d-2238-4ce1-847a-0a83b05fe602_story.html", "text": " Virginia open houses April 25-26", "topic": 3, "outlet": "Washington Post", "id": 171, "posted": "2015-04-24T07:50:00-0500"}, {"updated": "2015-05-01T08:00:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-may-2-3/2015/05/01/4c7f2bbe-aaf6-417c-a109-14df91b0e66a_story.html", "text": " Maryland open houses May 2-3", "topic": 3, "outlet": "Washington Post", "id": 164, "posted": "2015-05-01T08:00:00-0500"}, {"updated": "2015-05-08T08:00:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-may-9-10/2015/05/08/3c36e8ce-56b4-4a7e-a16d-94f5917a0029_story.html", "text": " Virginia open houses May 9-10", "topic": 3, "outlet": "Washington Post", "id": 170, "posted": "2015-05-08T08:00:00-0500"}, {"updated": "2015-05-29T07:50:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-may-30-31/2015/05/29/57139773-a21a-47d0-9abd-caa2b7ee4531_story.html", "text": " Maryland open houses May 30-31", "topic": 3, "outlet": "Washington Post", "id": 158, "posted": "2015-05-29T07:50:00-0500"}, {"updated": "2015-06-05T07:55:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-june-6-7/2015/06/05/45e412c1-e97b-460c-bbb6-d9dfe3964fd0_story.html", "text": " Maryland open houses June 6-7", "topic": 3, "outlet": "Washington Post", "id": 157, "posted": "2015-06-05T07:55:00-0500"}, {"updated": "2015-06-24T07:16:00-0500", "url": "http://www.washingtonpost.com/local/prince-georges-county-volunteer-opportunities/2015/06/18/27aefbb2-1511-11e5-9ddc-e3353542100c_story.html", "text": " Prince Georges County volunteer opportunities", "topic": 3, "outlet": "Washington Post", "id": 169, "posted": "2015-06-24T07:16:00-0500"}, {"updated": "2015-07-01T11:27:00-0500", "url": "http://www.washingtonpost.com/local/prince-georges-county-volunteer-opportunities/2015/06/29/8fc89d60-1ac6-11e5-bd7f-4611a60dd8e5_story.html", "text": " Prince Georges County volunteer opportunities", "topic": 3, "outlet": "Washington Post", "id": 163, "posted": "2015-07-01T11:27:00-0500"}, {"updated": "2015-07-03T07:50:00-0500", "url": "http://www.washingtonpost.com/realestate/maryland-open-houses-july-4-5/2015/07/03/f10097d4-7fcc-4292-a89e-748ab9e9c154_story.html", "text": " Maryland open houses July 4-5", "topic": 3, "outlet": "Washington Post", "id": 168, "posted": "2015-07-03T07:50:00-0500"}, {"updated": "2015-07-03T08:00:00-0500", "url": "http://www.washingtonpost.com/realestate/virginia-open-houses-july-4-5/2015/07/03/a5633325-4bd4-4dcb-9240-5f921c1566ec_story.html", "text": " Virginia open houses July 4-5", "topic": 3, "outlet": "Washington Post", "id": 156, "posted": "2015-07-03T08:00:00-0500"}, {"updated": "2015-07-08T07:19:00-0500", "url": "http://www.washingtonpost.com/world/the_americas/the-latest-pope-visits-jesuit-church-then-calls-it-a-day/2015/07/07/e91de7bc-250c-11e5-b621-b55e495e9b78_story.html", "text": " The Latest: Pope stops to pray for priest slain in 1980", "topic": 3, "outlet": "Washington Post", "id": 162, "posted": "2015-07-08T07:19:00-0500"}, {"updated": "2015-07-10T03:06:00-0500", "url": "http://www.washingtonpost.com/business/technology/recalls-this-week-kettles-fireplaces-slingshots/2015/07/10/b95cc198-2736-11e5-b621-b55e495e9b78_story.html", "text": " Recalls this week: kettles, fireplaces, slingshots", "topic": 3, "outlet": "Washington Post", "id": 155, "posted": "2015-07-10T03:06:00-0500"}, {"updated": "2015-07-12T07:45:00-0500", "url": "http://www.washingtonpost.com/world/the_americas/the-latest-gay-rights-activist-pleased-with-papal-message/2015/07/11/344ebf00-2831-11e5-b621-b55e495e9b78_story.html", "text": " The Latest: Pope takes off for Rome, wrapping up LatAm visit", "topic": 3, "outlet": "Washington Post", "id": 154, "posted": "2015-07-12T07:45:00-0500"}, {"updated": "2015-07-16T05:09:00-0500", "url": "http://www.washingtonpost.com/national/obama-will-go-to-prison-for-a-fairer-justice-system/2015/07/16/2cb67bb0-2b8e-11e5-960f-22c4ba982ed4_story.html", "text": " Obama visits prison to call for a fairer justice system", "topic": 3, "outlet": "Washington Post", "id": 153, "posted": "2015-07-16T05:09:00-0500"}, {"updated": "2015-07-16T09:15:00-0500", "url": "http://www.washingtonpost.com/local/alexandria-and-arlington-crime-report/2015/07/09/4a49a0fe-2651-11e5-b621-b55e495e9b78_story.html", "text": " Alexandria and Arlington crime report", "topic": 3, "outlet": "Washington Post", "id": 161, "posted": "2015-07-16T09:15:00-0500"}, {"updated": "2015-07-16T12:01:00-0500", "url": "http://www.washingtonpost.com/local/dc-community-calendar-july-16-23-2015/2015/07/13/917a0902-2447-11e5-b77f-eb13a215f593_story.html", "text": " D.C. community calendar, July 16-23, 2015", "topic": 3, "outlet": "Washington Post", "id": 167, "posted": "2015-07-16T12:01:00-0500"}, {"updated": "2015-07-17T02:04:00-0500", "url": "http://www.washingtonpost.com/business/recalls-this-week-cribs-lighting-fixtures-cameras/2015/07/17/38d9831c-2cae-11e5-960f-22c4ba982ed4_story.html", "text": " Recalls this week: Cribs, lighting fixtures, cameras", "topic": 3, "outlet": "Washington Post", "id": 160, "posted": "2015-07-17T02:04:00-0500"}, {"updated": "2015-07-17T06:15:00-0500", "url": "http://www.washingtonpost.com/local/loudoun-county-and-fauquier-county-health-calendar/2015/07/16/54e2033a-1f44-11e5-bf41-c23f5d3face1_story.html", "text": " Loudoun County and Fauquier County health calendar", "topic": 3, "outlet": "Washington Post", "id": 152, "posted": "2015-07-17T06:15:00-0500"}, {"updated": "2015-07-18T11:17:00-0500", "url": "http://www.washingtonpost.com/national/last-words-from-slain-marine-to-girlfriend-active-shooter/2015/07/17/5c60f4b6-2ce8-11e5-960f-22c4ba982ed4_story.html", "text": " Sailor slain in Tennessee attacks was star baseball player", "topic": 3, "outlet": "Washington Post", "id": 159, "posted": "2015-07-18T11:17:00-0500"}];
var huffP = data.filter(function(point) {
  return (point.outlet === "Huffington Post");
});
var nbc = data.filter(function(point) {
  return (point.outlet === "NBC News");
});
var washP = data.filter(function(point) {
  return (point.outlet === "Washington Post");
});

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('story', {
    topicTitle: "Viasat-2",
    "topic": [
    {source: {name:'Huffington Post', article: listToArticle(huffP)}},
    {source: {name:'NBC News', article: listToArticle(nbc)}},
    {source: {name:'Washington Post', article: listToArticle(washP)}}]});
});

function listToArticle(list) {
  var newArr = [];
  list.forEach(function(point) {
    newArr.push({title: point.text, updated: new Date(point.updated).toLocaleString(), url: point.url});
  });
  return newArr;
}

module.exports = router;